<definition>
	<var name="assetType" value="Message Boards Thread" />
	<var name="userName" value="Test Test" />

	<command name="addCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="AssertElementPresent" locator1="TextInput#SUBJECT" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="addCPWithAttachment">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="Click" locator1="TextInput#SUBJECT" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Attachments" />
		</execute>

		<execute function="AssertClick" locator1="Button#SELECT_FILES" value1="Select Files" />

		<var name="key_attachmentFileName" value="${mbAttachmentFile}" />

		<execute function="SikuliUploadCommonFile" locator1="OS#FILE_DIALOG_BOX_FILE_NAME_FIELD_PNG" value1="${mbAttachmentFile}" />

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="addInvalidAttachmentPG">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Pause" locator1="3000" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Attachments" />
		</execute>

		<execute function="AssertClick" locator1="Button#SELECT_FILES" value1="Select Files" />

		<var name="key_attachmentFileName" value="${mbThreadAttachment}" />

		<execute function="SikuliUploadCommonFile" locator1="OS#FILE_DIALOG_BOX_FILE_NAME_FIELD_PNG" value1="${mbThreadAttachment}" />

		<if>
			<equals arg1="${invalidSize}" arg2="true" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_ATTACHMENT_INVALID_SIZE_ERROR" value1="Request is larger than ${maxAttachmentFileSize}KB and could not be processed." />
			</then>
		</if>
	</command>

	<command name="addPG">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="AssertElementPresent" locator1="TextInput#SUBJECT" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<if>
			<isset var="source" />
			<then>
				<execute function="Click" locator1="AlloyEditor#EDITOR">
					<var name="key_editor" value="body" />
				</execute>

				<execute function="Click" locator1="Button#EDITOR_SWITCH" />

				<execute function="Type#sendKeysAceEditor" locator1="TextArea#ACE_EDITOR" value1="${threadBody}" />
			</then>
			<else>
				<execute macro="AlloyEditor#typeEditor">
					<var name="content" value="${threadBody}" />
					<var name="editor" value="body" />
				</execute>
			</else>
		</if>

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="addPGAsAnonymous">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="More Settings" />
		</execute>

		<execute function="Check" locator1="Checkbox#ANONYMOUS" />

		<execute macro="PortletEntry#publish" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="Anonymous" />
	</command>

	<command name="addPGAsQuestion">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="AssertElementPresent" locator1="TextInput#SUBJECT" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="More Settings" />
		</execute>

		<execute function="Check" locator1="Checkbox#MARK_AS_A_QUESTION" />

		<execute macro="PortletEntry#publish" />

		<execute function="AssertClick" locator1="Breadcrumb#BREADCRUMB_ENTRY_LINK" value1="${breadcrumbName}">
			<var name="key_breadcrumbName" value="${breadcrumbName}" />
		</execute>

		<execute macro="MessageboardsThread#viewMarkedAsQuestionPG">
			<var name="threadSubject" value="${threadSubject}" />
		</execute>
	</command>

	<command name="addPGWithAttachment">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Attachments" />
		</execute>

		<execute function="AssertClick" locator1="Button#SELECT_FILES" value1="Select Files" />

		<var name="key_attachmentFileName" value="${mbThreadAttachment}" />

		<execute function="SikuliUploadCommonFile" locator1="OS#FILE_DIALOG_BOX_FILE_NAME_FIELD_PNG" value1="${mbThreadAttachment}" />

		<execute macro="Button#clickPublish" />

		<execute function="AssertElementPresent" locator1="MessageBoardsThread#THREAD_REPLY_BUTTON">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="addPGWithPermissions">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Permissions" />
		</execute>

		<execute function="Select" locator1="AssetPermissions#VIEWABLE_AS_SELECT" value1="${viewableBySelection}" />

		<execute function="SelectFrameTop" />

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="addPGWithPriority">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="More Settings" />
		</execute>

		<execute function="Select" locator1="MessageBoardsEditMessage#PRIORITY_SELECT" value1="${threadPriority}" />

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="addTagPGCmd">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="AssertTextEquals" locator1="TextInput#SUBJECT" value1="${threadSubject}" />
		<execute function="AssertElementPresent" locator1="CKEditor#BODY_FIELD" />

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Categorization" />
		</execute>

		<if>
			<isset var="tagNameList" />
			<then>
				<for list="${tagNameList}" param="tagName">
					<execute function="Type" locator1="AssetCategorization#TAGS_FIELD" value1="${tagName}" />

					<execute function="AssertClick" locator1="AssetCategorization#TAGS_ADD_BUTTON" value1="Add" />
				</for>
			</then>
			<else>
				<execute function="Type" locator1="AssetCategorization#TAGS_FIELD" value1="${tagName}" />

				<execute function="AssertClick" locator1="AssetCategorization#TAGS_ADD_BUTTON" value1="Add" />

				<execute function="AssertElementPresent" locator1="AssetCategorization#TAG">
					<var name="key_tagName" value="${tagName}" />
				</execute>
			</else>
		</if>

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="addWithWorkflowCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="AssertElementPresent" locator1="TextInput#SUBJECT" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="Click" locator1="Button#SUBMIT_FOR_PUBLICATION" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="addWithWorkflowPG">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="Click" locator1="Button#SUBMIT_FOR_PUBLICATION" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="assertAlertNotPresent">
		<execute function="AssertAlertNotPresent" />
	</command>

	<command name="banUser">
		<execute function="Click" locator1="MessageBoards#THREAD_REPLY_ACTIONS">
			<var name="key_threadReplyBody" value="${threadReplyBody}" />
		</execute>

		<execute function="Click" locator1="MenuItem#ANY_MENU_ITEM" value1="Ban This User">
			<var name="key_menuItem" value="Ban This User" />
		</execute>

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="cancelAdd">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="AssertClick" locator1="Button#CANCEL" value1="Cancel" />
	</command>

	<command name="cancelEdit">
		<execute function="Click" locator1="MessageBoards#VERTICAL_ELLIPSIS">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Edit">
			<var name="key_menuItem" value="Edit" />
		</execute>

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubjectEdit}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBodyEdit}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="AssertClick" locator1="Button#CANCEL" value1="Cancel" />
	</command>

	<command name="deletePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="Click" locator1="MessageBoards#THREAD_LIST_ACTIONS" />

		<execute function="Click" locator1="MenuItem#ANY_MENU_ITEM" value1="Move to Recycle Bin">
			<var name="key_menuItem" value="Move to Recycle Bin" />
		</execute>

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_THREAD" />
	</command>

	<command name="downloadAttachmentPG">
		<execute function="Click" locator1="MessageBoardsThread#MESSAGE_BODY_ATTACHMENT_1" />

		<execute function="DownloadTempFile" />
	</command>

	<command name="editCP">
		<execute macro="LexiconEntry#gotoEllipsisMenuItem">
			<var name="menuItem" value="Edit" />
		</execute>

		<if>
			<equals arg1="${threadAttachmentRemove}" arg2="true" />
			<then>
				<execute macro="Panel#expandPanel">
					<var name="panel" value="Attachments" />
				</execute>

				<execute function="AssertTextEquals#assertPartialText" locator1="ContentRow#ENTRY_CONTENT_ENTRY_NAME_LINK" value1="${mbAttachmentFile}">
					<var name="key_rowEntry" value="${mbAttachmentFile}" />
				</execute>

				<execute function="AssertClick" locator1="MessageBoardsEditMessage#ATTACHMENTS_REMOVE_LINK" value1="Move to Recycle Bin">
					<var name="key_attachmentName" value="${mbAttachmentFile}" />
				</execute>
			</then>
		</if>

		<if>
			<isset var="threadSubjectEdit" />
			<then>
				<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubjectEdit}" />
			</then>
		</if>

		<if>
			<isset var="threadBodyEdit" />
			<then>
				<execute function="Click" locator1="AlloyEditor#EDITOR">
					<var name="key_editor" value="body" />
				</execute>

				<execute function="AssertElementPresent" locator1="AlloyEditor#CONTENT_ADD_BUTTON" />

				<execute macro="AlloyEditor#typeEditor">
					<var name="content" value="${threadBodyEdit}" />
					<var name="editor" value="body" />
				</execute>
			</then>
		</if>

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="editPG">
		<execute function="Click" locator1="MessageBoards#VERTICAL_ELLIPSIS">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Edit">
			<var name="key_menuItem" value="Edit" />
		</execute>

		<if>
			<isset var="threadSubjectEdit" />
			<then>
				<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubjectEdit}" />
			</then>
		</if>

		<if>
			<isset var="threadBodyEdit" />
			<then>
				<execute macro="AlloyEditor#typeEditor">
					<var name="content" value="${threadBodyEdit}" />
					<var name="editor" value="body" />
				</execute>
			</then>
		</if>

		<if>
			<equals arg1="${saveAsDraft}" arg2="true" />
			<then>
				<execute function="AssertClick" locator1="Button#SAVE_AS_DRAFT" value1="Save as Draft" />
			</then>
			<elseif>
				<equals arg1="${preview}" arg2="true" />
				<then>
					<execute function="AssertClickNoError" locator1="Button#PREVIEW" value1="Preview" />

					<execute function="Confirm" value1="In order to preview your changes, the message will be saved as a draft and other users may not be able to see it. Are you sure you want to do this?" />

					<var name="key_threadSubject" value="${threadSubject}" />
					<var name="key_userName" value="${userName}" />

					<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="Edit ${threadSubject}" />
					<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${threadSubject}" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Draft" />
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_1" value1="${threadBodyEdit}" />
				</then>
			</elseif>
			<else>
				<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />
			</else>
		</if>

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="editViaMyPosts">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_MY_POSTS" value1="My Posts" />

		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="threadSubjectEdit" arg2="true" />
			<then>
				<var name="key_threadSubject" value="${threadSubjectEdit}" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="Click" locator1="MessageBoards#VERTICAL_ELLIPSIS" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Edit">
			<var name="key_menuItem" value="Edit" />
		</execute>

		<execute macro="PortletEntry#publish" />
	</command>

	<command name="flagPG">
		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_FLAG_1" value1="Flag" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_HEADER" value1="Report Inappropriate Content" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_WARNING" value1="You are about to report a violation of our Terms of Use. All reports are strictly confidential." />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_WARNING_TERMS_OF_USE_LINK" value1="Terms of Use" />

		<execute function="Select" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_REASON_SELECT" value1="${flagReason}" />

		<execute macro="Button#clickSave" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#REPORT_INAPPROPRIATE_CONTENT_SUCCESS_MESSAGE" value1="Although we cannot disclose our final decision, we do review every report and appreciate your effort to make sure Liferay is a safe environment for everyone." />

		<execute function="Click" locator1="Icon#CLOSE" />
	</command>

	<command name="gotoCP">
		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>
	</command>

	<command name="gotoPG">
		<var name="key_repliesCount" value="${replyCount}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${lastPostUserName}" />

		<if>
			<isset var="messageBoardsThreadURL" />
			<then>
				<execute function="AssertLocation" value1="${messageBoardsThreadURL}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_LAST_POST" value1="${lastPostUserName}" />

				<if>
					<equals arg1="${replyCount}" arg2="1" />
					<then>
						<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="${replyCount} Reply" />
					</then>
					<else>
						<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="${replyCount} Replies" />
					</else>
				</if>

				<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
			</else>
		</if>
	</command>

	<command name="gotoViewInContext">
		<execute function="AssertClick" locator1="Link#VIEW_IN_CONTEXT" value1="View in Context »" />
	</command>

	<command name="lockPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="Click" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="Click" locator1="Icon#BODY_VERTICAL_ELLIPSIS" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Lock">
			<var name="key_menuItem" value="Lock" />
		</execute>

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="markAsAnswerCP">
		<execute function="Click" locator1="MessageBoards#THREAD_REPLY_ACTIONS">
			<var name="key_threadReplyBody" value="${threadReplyBody}" />
		</execute>

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Mark as an Answer">
			<var name="key_menuItem" value="Mark as an Answer" />
		</execute>

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
	</command>

	<command name="markAsAnswerPG">
		<execute function="Click" locator1="MessageBoards#THREAD_REPLY_ACTIONS">
			<var name="key_threadReplyBody" value="${threadReplyBody}" />
		</execute>

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Mark as an Answer">
			<var name="key_menuItem" value="Mark as an Answer" />
		</execute>

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
	</command>

	<command name="movePG">
		<execute function="AssertClick" locator1="MessageBoards#CATEGORY_LIST_CATEGORY" value1="${categoryName1}">
			<var name="key_categoryName" value="${categoryName1}" />
		</execute>

		<execute function="Click" locator1="MessageBoards#THREAD_LIST_ACTIONS">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Move">
			<var name="key_menuItem" value="Move" />
		</execute>

		<execute function="AssertClick" locator1="Button#SELECT" value1="Select" />

		<execute function="Pause" locator1="5000" />

		<execute function="SelectFrame" locator1="MessageBoardsSelectCategory#IFRAME" />

		<execute function="AssertClick" locator1="MessageBoardsSelectCategory#CATEGORY_TABLE_CHOOSE_BUTTON_2" value1="Choose" />

		<if>
			<equals arg1="${explanationPost}" arg2="true" />
			<then>
				<execute function="SelectFrame" value1="relative=top" />

				<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />
				<execute function="Check" locator1="Checkbox#ADD_EXPLANATION_POST" />
				<execute function="Type" locator1="TextInput#SUBJECT" value1="${explanationSubject}" />

				<execute macro="AlloyEditor#typeEditor">
					<var name="content" value="${explanationBody}" />
					<var name="editor" value="body" />
				</execute>
			</then>
		</if>

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />

		<execute function="AssertClick" locator1="Button#MOVE" value1="Move" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="moveToHomePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="${categoryDescriptionEnabled}" arg2="true" />
			<then>
				<var name="key_categoryDescription" value="${categoryDescription}" />

				<execute function="AssertClick" locator1="MessageBoards#CATEGORY_LIST_CATEGORY_DESCRIPTION" value1="${categoryDescription}" />
			</then>
			<else>
				<var name="key_categoryName" value="${categoryName}" />

				<execute function="AssertClick" locator1="MessageBoards#CATEGORY_LIST_CATEGORY" value1="${categoryName}" />
			</else>
		</if>

		<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_ACTIONS" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Move">
			<var name="key_menuItem" value="Move" />
		</execute>

		<execute function="AssertClick" locator1="Button#SELECT" value1="Select" />

		<execute function="SelectFrame" locator1="MessageBoardsSelectCategory#IFRAME" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsSelectCategory#CATEGORIES_LINK" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsSelectCategory#CATEGORIES_LINK" value1="Categories" />
			</then>
		</if>

		<execute function="AssertClick" locator1="MessageBoardsSelectCategory#CHOOSE_THIS_CATEGORY_BUTTON" value1="Choose This Category" />

		<if>
			<equals arg1="${explanationPost}" arg2="true" />
			<then>
				<execute function="SelectFrame" value1="relative=top" />

				<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />
				<execute function="Check" locator1="Checkbox#ADD_EXPLANATION_POST" />

				<execute function="Type" locator1="TextInput#SUBJECT" value1="${explanationSubject}" />

				<execute macro="AlloyEditor#typeEditor">
					<var name="content" value="${explanationBody}" />
					<var name="editor" value="body" />
				</execute>
			</then>
		</if>

		<execute function="SelectFrame" value1="relative=top" />

		<execute function="AssertElementPresent" locator1="MessageBoardsMoveThread#CATEGORY_FIELD" />

		<execute function="AssertClick" locator1="Button#MOVE" value1="Move" />
	</command>

	<command name="moveToRecycleBinCP">
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute macro="LexiconEntry#gotoEllipsisMenuItem">
			<var name="menuItem" value="Move to Recycle Bin" />
		</execute>

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
		<execute function="AssertTextEquals#assertText" locator1="Message#EMPTY_INFO" value1="There are no threads or categories." />
	</command>

	<command name="previewAddPG">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="AssertClick" locator1="Button#PREVIEW" value1="Preview" />

		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="Edit ${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Draft" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />
	</command>

	<command name="ratePG">
		<if>
			<equals arg1="${ratingType}" arg2="Positive" />
			<then>
				<execute function="Click" locator1="MessageBoardsThread#MESSAGE_RATING_1_UPVOTE" />
			</then>
			<elseif>
				<equals arg1="${ratingType}" arg2="Negative" />
				<then>
					<execute function="Click" locator1="MessageBoardsThread#MESSAGE_RATING_1_DOWNVOTE" />
				</then>
			</elseif>
		</if>
	</command>

	<command name="removeViewPermissionsPG">
		<var method="StringUtil#lowerCase('${key_roleTitle}')" name="key_roleTitle" />

		<execute function="Click" locator1="MessageBoards#THREAD_LIST_ACTIONS">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Permissions">
			<var name="key_menuItem" value="Permissions" />
		</execute>

		<execute macro="IFrame#selectPermissionsFrame" />

		<execute function="Uncheck" locator1="Permissions#CONFIGURATION_PERMISSIONS_VIEW_CHECKBOX" />

		<execute macro="Button#clickSave" />

		<execute function="AssertTextEquals#assertPartialText" locator1="Permissions#SUCCESS_MESSAGE" value1="Your request completed successfully." />

		<execute function="SelectFrame" value1="relative=top" />
	</command>

	<command name="replyCP">
		<if>
			<equals arg1="${markAsQuestion}" arg2="true" />
			<then>
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_ADMIN_FLAG" value1="Waiting for an Answer">
					<var name="key_threadSubject" value="${threadSubject}" />
				</execute>
			</then>
		</if>

		<execute function="Click" locator1="MessageBoardsThread#THREAD_REPLY_BUTTON">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute function="Type#typeEditor" locator1="MessageBoardsThread#THREAD_REPLY_EDITOR" value1="${threadReplyBody}" />

		<execute macro="PortletEntry#publish" />

		<if>
			<equals arg1="${markAsAnswer}" arg2="true" />
			<then>
				<execute macro="MessageboardsThread#markAsAnswerCP">
					<var name="threadReplyBody" value="${threadReplyBody}" />
				</execute>
			</then>
		</if>
	</command>

	<command name="replyPG">
		<if>
			<equals arg1="${displayStyle}" arg2="Question" />
			<then>
				<execute function="AssertClick" locator1="MessageBoards#QUESTION_CATEGORY_THREAD_TABLE_QUESTION" value1="${threadSubject}">
					<var name="key_threadSubject" value="${threadSubject}" />
				</execute>
			</then>
			<else>
				<var name="key_threadSubject" value="${threadSubject}" />

				<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
			</else>
		</if>

		<if>
			<isset var="threadReplySpecific" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_REPLY_SPECIFIC" value1="Reply">
					<var name="key_threadBody" value="${threadBody}" />
				</execute>
			</then>
			<else>
				<execute function="AssertElementPresent" locator1="MessageBoardsThread#THREAD_REPLY_BUTTON">
					<var name="key_threadSubject" value="${threadSubject}" />
				</execute>

				<execute function="AssertClick" locator1="MessageBoardsThread#THREAD_REPLY_BUTTON" value1="Reply">
					<var name="key_threadSubject" value="${threadSubject}" />
				</execute>
			</else>
		</if>

		<execute function="Type#typeEditor" locator1="MessageBoardsThread#THREAD_REPLY_EDITOR" value1="${threadReplyBody}" />

		<if>
			<equals arg1="${anonymous}" arg2="true" />
			<then>
				<execute function="Check" locator1="Checkbox#ANONYMOUS" />
			</then>
		</if>

		<execute function="Click" locator1="MessageBoardsThread#THREAD_PUBLISH_BUTTON" />

		<execute macro="Alert#viewSuccessMessage" />

		<if>
			<equals arg1="${markAsAnswer}" arg2="true" />
			<then>
				<execute macro="MessageboardsThread#markAsAnswerPG">
					<var name="threadReplyBody" value="${threadReplyBody}" />
				</execute>
			</then>
		</if>
	</command>

	<command name="replyWithAttachmentPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoardsThread#THREAD_REPLY_BUTTON" value1="Reply" />

		<execute function="Type#typeEditor" locator1="MessageBoardsThread#THREAD_REPLY_EDITOR" value1="${threadReplyBody}" />

		<execute function="AssertClick" locator1="Button#ADVANCED_REPLY" value1="Advanced Reply" />

		<if>
			<condition function="IsNotVisible" locator1="Button#SELECT_FILES" />
			<then>
				<execute function="AssertClick" locator1="Panel#ENTRY_ATTACHMENTS" value1="Attachments" />
			</then>
		</if>

		<execute function="AssertClick" locator1="Button#SELECT_FILES" value1="Select Files" />

		<var name="key_attachmentFileName" value="${mbThreadAttachment}" />

		<execute function="SikuliUploadCommonFile" locator1="OS#FILE_DIALOG_BOX_FILE_NAME_FIELD_PNG" value1="${mbThreadAttachment}" />

		<execute function="AssertClick" locator1="Button#PUBLISH" value1="Publish" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="replyWithQuotePG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="Click" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertClick" locator1="MessageBoardsThread#MESSAGE_REPLY_WITH_QUOTE_1" value1="Reply with Quote" />

		<execute function="Click" locator1="CKEditor#TOOLBAR_SOURCE_BUTTON" />

		<execute function="Type#sendKeys" locator1="CKEditor#BODY_FIELD_SOURCE_ON_SEND_KEYS" value1="${threadReplyBody}" />

		<execute function="Click" locator1="Button#PUBLISH" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="restoreMBAttachmentCP">
		<execute function="Click" locator1="MessageBoardsRemovedAttachments#REMOVED_ATTACHMENT_LINK" />

		<execute macro="IFrame#selectModalFrame" />

		<execute function="AssertElementPresent" locator1="MessageBoardsRemovedAttachments#ATTACHMENT_FILE_NAME">
			<var name="key_mbAttachmentFile" value="${mbAttachmentFile}" />
		</execute>

		<execute macro="LexiconEntry#gotoEntryMenuItem">
			<var name="menuItem" value="Restore" />
			<var name="rowEntry" value="${mbAttachmentFile}" />
		</execute>

		<execute macro="Alert#viewSuccessMessage" />
		<execute function="AssertTextEquals" locator1="Message#EMPTY_INFO" value1="This message does not have file attachments in the Recycle Bin." />

		<execute macro="IFrame#closeFrame" />

		<execute function="SelectFrameTop" />
	</command>

	<command name="saveNewThreadAsDraft">
		<execute function="AssertClick" locator1="Button#NEW_THREAD" value1="New Thread" />

		<execute function="Pause" locator1="3000" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="AssertClick" locator1="Button#SAVE_AS_DRAFT" value1="Save as Draft" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#TITLE_HEADER" value1="Edit" />

		<execute macro="Alert#viewSuccessMessage" />
	</command>

	<command name="searchPG">
		<execute macro="Search#searchCP">
			<var name="searchTerm" value="${threadKeyword}" />
		</execute>

		<execute function="AssertTextEquals" locator1="MessageBoardsSearch#SEARCH_RESULTS_ENTRY_TITLE" value1="${threadSubject}">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>
	</command>

	<command name="splitThreadPG">
		<execute function="Click" locator1="MessageBoards#VERTICAL_ELLIPSIS_REPLY_CARD" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Split Thread">
			<var name="key_menuItem" value="Split Thread" />
		</execute>

		<execute function="AssertTextEquals" locator1="Message#INFO" value1="Click OK to create a new thread with the following messages." />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsSplitThread#THREAD_TABLE_SUBJECT" value1="${threadSubject}">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSplitSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsSplitThread#ADD_EXPLANATION_POST_LABEL" value1="Add explanation post to the source thread." />
		<execute function="Check" locator1="MessageBoardsSplitThread#ADD_EXPLANATION_POST_CHECKBOX" />

		<execute function="AssertTextEquals" locator1="Message#INFO_EXPLANATION_POST" value1="The following post will be added in place of the moved message." />

		<execute function="Type" locator1="MessageBoardsSplitThread#ADD_EXPLANATION_SUBJECT_FIELD" value1="${threadSplitReplySubject}" />

		<execute macro="AlloyEditor#typeEditor">
			<var name="content" value="${threadSplitReplyBody}" />
			<var name="editor" value="body" />
		</execute>

		<execute function="AssertClick" locator1="Button#OK" value1="OK" />

		<var name="key_threadBody" value="${threadReplyBody}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSplitSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadReplyBody}" />

		<var name="key_threadBody" value="${threadSplitReplyBody}" />

		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#THREAD_BODY_2" />
	</command>

	<command name="tearDownCP">
		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Content" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Message Boards" />
		</execute>

		<if>
			<condition function="IsElementPresent#isVisible" locator1="MessageBoards#THREAD_TABLE_ALL_CHECKBOX" />
			<then>
				<execute function="Check" locator1="MessageBoards#THREAD_TABLE_ALL_CHECKBOX" />

				<execute function="AssertClick" locator1="MessageBoardsAdmin#THREADS_RECYCLE_BIN_BUTTON" value1="Move to Recycle Bin" />

				<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
			</then>
		</if>

		<execute macro="Navigator#openURL" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Recycle Bin" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Recycle Bin" />
		</execute>

		<execute macro="RecycleBin#emptyCP" />
	</command>

	<command name="viewAnonymousPostingCheckboxCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="AssertElementPresent" locator1="Checkbox#ANONYMOUS" />
	</command>

	<command name="viewAnswerPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_ANSWER" value1="Answer" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />

		<execute function="Click" locator1="Breadcrumb#BREADCRUMB_ENTRY_LINK">
			<var name="key_breadcrumbName" value="Home" />
		</execute>
	</command>

	<command name="viewAsWorkflowAsset">
		<execute macro="SiteAdmin#viewPortletTitle">
			<var name="portletTitle" value="${threadSubject}" />
		</execute>

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}">
			<var name="key_threadBody" value="${threadBody}" />
		</execute>
	</command>

	<command name="viewBBCodeNoXSS">
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute macro="MessageboardsThread#assertAlertNotPresent" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_LAST_POST" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_REPLY_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />
	</command>

	<command name="viewCP">
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_LAST_POST" value1="${userName}" />

		<var name="key_repliesCount" value="${replyCount}" />

		<if>
			<equals arg1="${replyCount}" arg2="1" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="${replyCount} Reply" />
			</then>
			<else>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="${replyCount} Replies" />
			</else>
		</if>

		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_LIST_VIEWS" />
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_LIST_ACTIONS" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="Portlet#HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />

		<if>
			<isset var="mbAttachmentFile" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_ATTACHMENT_1" value1="${mbAttachmentFile}" />
			</then>
		</if>
	</command>

	<command name="viewDefaultCP">
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals#assertText" locator1="Message#EMPTY_INFO" value1="There are no threads or categories." />
		<execute function="AssertTextNotPresent" value1="${threadSubject}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_CHECKBOX" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_THREAD" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_LAST_POST" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_REPLIES" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_VIEWS" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_ACTIONS" />
	</command>

	<command name="viewDoNotHaveRequiredPermissionsPG">
		<var name="key_repliesCount" value="0" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute macro="Alert#viewRequestFailedToComplete" />

		<execute function="AssertTextEquals#assertPartialText" locator1="Message#ERROR_2" value1="You do not have the required permissions." />
		<execute function="AssertTextNotPresent" value1="${threadSubject}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_THREAD" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_REPLIES" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_LAST_POST" />
	</command>

	<command name="viewLockedPG">
		<var name="key_threadStatus" value="Locked" />
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_STATUS" value1="Locked" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_REPLY_1" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_QUICK_REPLY_1" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_REPLY_WITH_QUOTE_1" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#MESSAGE_EDIT_1" />

		<execute function="Click" locator1="Icon#BODY_VERTICAL_ELLIPSIS" />

		<execute function="AssertTextEquals" locator1="MenuItem#ANY_MENU_ITEM" value1="Unlock">
			<var name="key_menuItem" value="Unlock" />
		</execute>
	</command>

	<command name="viewMarkAsAnswerPG">
		<var name="key_threadSubject" value="${threadSubject}" />

		<if>
			<equals arg1="${displayStyle}" arg2="Question" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoards#QUESTION_CATEGORY_THREAD_TABLE_STATISTICS_ANSWERS" value1="${questionAnswers}" />

				<execute function="AssertClick" locator1="MessageBoards#QUESTION_CATEGORY_THREAD_TABLE_QUESTION" value1="${threadSubject}" />
			</then>
			<else>
				<execute function="AssertClick" locator1="MessageBoards#THREAD_TABLE_FLAG" value1="Resolved" />

				<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
			</else>
		</if>

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_ANSWER_1" value1="Answer" />
	</command>

	<command name="viewMarkAsQuestionCheckedCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="AssertVisible" locator1="Button#PUBLISH" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="Panel#expandPanel">
			<var name="panel" value="More Settings" />
		</execute>

		<execute function="AssertChecked" locator1="Checkbox#MARK_AS_A_QUESTION" />

		<execute function="AssertClick" locator1="Button#CANCEL" value1="Cancel" />
	</command>

	<command name="viewMarkAsQuestionNotCheckedCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="AssertVisible" locator1="Button#PUBLISH" />

		<execute function="Type" locator1="TextInput#SUBJECT" value1="${threadSubject}" />

		<execute macro="Panel#expandPanel">
			<var name="panel" value="More Settings" />
		</execute>

		<execute function="AssertNotChecked" locator1="Checkbox#MARK_AS_A_QUESTION" />

		<execute function="AssertClick" locator1="Button#CANCEL" value1="Cancel" />
	</command>

	<command name="viewMarkedAsQuestionPG">
		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_LIST_QUESTION_MARK_ICON">
			<var name="key_threadSubject" value="${threadSubject}" />
		</execute>
	</command>

	<command name="viewNoAnonymousPostingCheckboxCP">
		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="AssertClick" locator1="MenuItem#ANY_MENU_ITEM" value1="Thread">
			<var name="key_menuItem" value="Thread" />
		</execute>

		<execute function="AssertElementNotPresent" locator1="Checkbox#ANONYMOUS" />
	</command>

	<command name="viewNoPG">
		<var name="key_repliesCount" value="0" />
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals#assertText" locator1="Message#EMPTY_INFO" value1="There are no threads or categories." />
		<execute function="AssertTextNotPresent" value1="${threadSubject}" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_THREAD" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_STARTED_BY" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_TABLE_REPLIES" />
		<execute function="AssertElementNotPresent" locator1="MessageBoards#THREAD_LIST_LAST_POST" />
	</command>

	<command name="viewNoXSSPG">
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_title" value="${threadBody}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertAlertNotPresent" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<if>
			<equals arg1="${sourceContent}" arg2="true" />
			<then>
				<execute function="AssertElementNotPresent" locator1="Header#H3_TITLE" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="Header#H3_TITLE" value1="${threadBody}" />
			</else>
		</if>
	</command>

	<command name="viewPG">
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />

		<if>
			<isset var="fontSize" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_BODY_STYLE_1" value1="${threadBody}">
					<var name="key_fontSize" value="${fontSize}" />
				</execute>
			</then>
		</if>

		<if>
			<isset var="threadSubject2" />
			<then>
				<var name="key_threadSubject" value="${threadSubject2}" />

				<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject2}" />

				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody2}">
					<var name="key_threadBody" value="${threadBody2}" />
				</execute>
			</then>
		</if>

		<if>
			<isset var="workflowTask" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Pending (${workflowTask})" />
			</then>
		</if>
	</command>

	<command name="viewPGViaAP">
		<var name="key_assetTitle" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="AP#ASSET_ABSTRACT_TITLE" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="AP#ASSET_ABSTRACT_DESCRIPTION" value1="${threadBody}" />

		<execute function="AssertClick" locator1="AP#ASSET_ABSTRACT_TITLE" value1="${threadSubject}" />

		<execute function="AssertVisible" locator1="Icon#SHARE" />

		<execute function="AssertTextEquals" locator1="APAsset#ASSET_TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="AssetRelatedAssets#MESSAGE_BOARDS_THREAD_TITLE" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="AssetRelatedAssets#MESSAGE_BOARDS_THREAD_CONTENT" value1="${threadBody}" />
	</command>

	<command name="viewPGWithPriority">
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadPriority" value="${threadPriority}" />
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_LIST_PRIORITY_ICON" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />
	</command>

	<command name="viewRatingPG">
		<if>
			<equals arg1="${ratingType}" arg2="Positive" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1" value1="+1 (1 Vote)" />
			</then>
			<elseif>
				<equals arg1="${ratingType}" arg2="Negative" />
				<then>
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1" value1="-1 (1 Vote)" />
				</then>
			</elseif>
		</if>
	</command>

	<command name="viewReplyCP">
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<if>
			<isset var="mbAttachmentFile" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#MESSAGE_BODY_ATTACHMENT_1" value1="${mbAttachmentFile}" />
			</then>
		</if>

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME_2" value1="${userName}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />
	</command>

	<command name="viewReplyPG">
		<var name="key_repliesCount" value="${replyCount}" />
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_LAST_POST" value1="${userName}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="${replyCount} Reply" />

		<if>
			<equals arg1="${guestReply}" arg2="true" />
			<then>
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_LAST_POST" value1="Anonymous" />

				<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
			</then>
			<else>
				<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
			</else>
		</if>

		<if>
			<equals arg1="${loggedOut}" arg2="true" />
			<then>
				<var name="key_threadBody" value="${threadReplyBody}" />

				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT_2" value1="RE: ${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadReplyBody}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT_2" value1="RE: ${threadSubject}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1_UPVOTE" value1="0" />

				<var name="key_threadBody" value="${threadReplyBody}" />

				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadReplyBody}" />
				<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_2_UPVOTE" value1="0" />
			</else>
		</if>

		<if>
			<equals arg1="${guestReply}" arg2="false" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_USERNAME_2" value1="${userName}" />
			</then>
		</if>

		<if>
			<isset var="mbThreadAttachment" />
			<then>
				<execute function="AssertElementPresent" locator1="MessageBoardsThread#MESSAGE_ATTACHMENT_IMAGE">
					<var name="key_mbThreadAttachment" value="${mbThreadAttachment}" />
				</execute>
			</then>
		</if>
	</command>

	<command name="viewReplyWithUpvote">
		<var name="key_repliesCount" value="${replyCount}" />
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="${replyCount} Posts" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_RATING_1_UPVOTE" value1="0" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />

		<if>
			<isset var="threadReplyBodyList" />
			<then>
				<for list="${threadReplyBodyList}" param="threadReplyBody">
					<var name="key_threadBody" value="${threadReplyBody}" />

					<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_REPLY_SUBJECT" value1="RE: ${threadSubject}" />
					<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadReplyBody}" />
				</for>
			</then>
		</if>
	</command>

	<command name="viewSplitThreadPG">
		<var name="key_repliesCount" value="1" />
		<var name="key_threadBody" value="${threadBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_TABLE_REPLIES" value1="1 Reply" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}" />

		<var name="key_threadBody" value="${threadSplitReplyBody}" />
		<var name="key_threadSubject" value="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadSplitReplyBody}" />

		<execute macro="Navigator#gotoPage">
			<var name="pageName" value="${pageName}" />
		</execute>

		<var name="key_repliesCount" value="0" />
		<var name="key_threadBody" value="${threadReplyBody}" />
		<var name="key_threadSubject" value="${threadSplitSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSplitSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_LIST_REPLIES" value1="0" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSplitSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSplitSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSplitSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadReplyBody}" />

		<var name="key_threadBody" value="${threadSplitReplyBody}" />
		<var name="key_threadSubject" value="${threadSplitReplySubject}" />

		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#THREAD_SUBJECT_2" />
		<execute function="AssertElementNotPresent" locator1="MessageBoardsThread#THREAD_BODY_2" />
	</command>

	<command name="viewStatisticsPostsCountDefaultPG">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_STATISTICS" value1="Statistics" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN_COLLAPSED" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN" value1="General" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_CATEGORIES" value1="0" />
		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_POSTS" value1="0" />
		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_PARTICIPANTS" value1="0" />
		<execute macro="PortletEntry#viewEmptyMessage">
			<var name="entity" value="Top Posters" />
		</execute>
	</command>

	<command name="viewStatisticsPostsCountPG">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_STATISTICS" value1="Statistics" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN_COLLAPSED" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsStatistics#GENERAL_DROPDOWN" value1="General" />
			</then>
		</if>

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#GENERAL_NUMBER_OF_POSTS" value1="${threadPostNumber}" />

		<if>
			<isset var="userPostNumber" />
			<then>
				<execute macro="MessageboardsThread#viewStatisticsTopPoster" />
			</then>
			<else>
				<execute macro="MessageboardsThread#viewStatisticsTopPoster">
					<var name="userMessageboardsRank" value="${userMessageboardsRank}" />
					<var name="userName" value="${userName}" />
					<var name="userPostNumber" value="${threadPostNumber}" />
				</execute>
			</else>
		</if>
	</command>

	<command name="viewStatisticsTopPoster">
		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_STATISTICS" value1="Statistics" />

		<if>
			<condition function="IsElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_DROPDOWN_COLLAPSED" />
			<then>
				<execute function="AssertClick" locator1="MessageBoardsStatistics#TOP_POSTERS_DROPDOWN" value1="Top Posters" />
			</then>
		</if>

		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_NAME" value1="${userName}" />

		<if>
			<isset var="userMessageboardsRank" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_RANK" value1="Rank: ${userMessageboardsRank}" />
			</then>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_RANK" value1="Rank: Youngling" />
			</else>
		</if>

		<var name="key_userPostNumber" value="${userPostNumber}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_POSTS" value1="Posts:${userPostNumber}" />
		<execute function="AssertElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_JOIN_DATE" />
		<execute function="AssertElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_LAST_POST_DATE" />
		<execute function="AssertElementPresent" locator1="MessageBoardsStatistics#TOP_POSTERS_AUTHOR_ICON" />
	</command>

	<command name="viewTagPG">
		<var method="StringUtil#lowerCase('${tagName}')" name="tagName" />

		<var name="key_tagName" value="tagName" />

		<if>
			<equals arg1="${messageTagNumber}" arg2="1" />
			<then>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_1" value1="${tagName}" />
			</then>
			<elseif>
				<equals arg1="${messageTagNumber}" arg2="2" />
				<then>
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_2" value1="${tagName}" />
				</then>
			</elseif>
			<elseif>
				<equals arg1="${messageTagNumber}" arg2="3" />
				<then>
					<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_3" value1="${tagName}" />
				</then>
			</elseif>
			<else>
				<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_TAG_1" value1="${tagName}" />
			</else>
		</if>
	</command>

	<command name="viewWithWorkflowPG">
		<var name="key_repliesCount" value="0" />
		<var name="key_threadBody" value="threadBody" />
		<var name="key_threadSubject" value="${threadSubject}" />
		<var name="key_userName" value="${userName}" />

		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoards#THREAD_TABLE_REPLIES" value1="0 Replies" />

		<execute function="AssertElementPresent" locator1="MessageBoards#THREAD_LIST_LAST_POST" />
		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<var name="key_threadStatus" value="Pending (${workflowTask})" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_STATUS" value1="Pending (${workflowTask})" />

		<execute function="AssertClick" locator1="MessageBoards#NAVIGATION_MY_POSTS" value1="My Posts" />

		<execute function="AssertTextEquals" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Pending (${workflowTask})" />

		<execute function="AssertClick" locator1="MessageBoards#THREAD_LIST_THREAD" value1="${threadSubject}" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#TITLE_HEADER" value1="${threadSubject}" />
		<execute function="AssertTextEquals#assertPartialText" locator1="MessageBoardsThread#THREAD_USERNAME" value1="${userName}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_SUBJECT" value1="${threadSubject}" />
		<execute function="AssertTextEquals" locator1="MessageBoardsThread#MESSAGE_WORKFLOW_STATUS_1" value1="Pending" />

		<execute function="AssertTextEquals" locator1="MessageBoardsThread#THREAD_BODY" value1="${threadBody}">
			<var name="key_threadBody" value="${threadBody}" />
		</execute>
	</command>

	<command name="viewWithWorkflowPGViaAP">
		<execute function="AssertElementNotPresent" locator1="AP#ASSET_ABSTRACT_TITLE">
			<var name="key_assetTitle" value="${threadSubject}" />
		</execute>
	</command>
</definition>